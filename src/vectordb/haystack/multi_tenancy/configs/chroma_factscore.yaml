# CHROMA + FACTSCORE Multi-Tenancy Configuration
# Dataset: factscore
# Strategy: database_scoping

pipeline:
  name: "chroma_factscore_multitenancy"
  description: "Multi-tenant RAG for factscore using chroma"

database:
  type: "chroma"
  host: "${CHROMA_HOST:-localhost}"
  port: "${CHROMA_PORT:-8000}"

collection:
  name: "{dataset}_multitenancy"
  description: "{dataset} documents with multi-tenancy"

multitenancy:
  strategy: "database_scoping"
  field_name: "tenant_id"
  auto_create_tenant: true
  tenant: "${CHROMA_TENANT:-default}"
  database: "${CHROMA_DATABASE:-default}"


embedding:
  model_name: "Qwen/Qwen3-Embedding-0.6B"
  dimension: 1024
  output_dimension: null
  batch_size: 32
  device: "auto"

dataset:
  name: "dskar/FActScore"
  split: "train"
  max_samples: 4000
  source: "huggingface"

retrieval:
  top_k: 10
  metric: "cosine"

rag:
  prompt_template: |
    Answer based on the retrieved documents.

    Context:
    {% for doc in documents %}
    - {{ doc.content }}
    {% endfor %}

    Question: {{ query }}

    Answer:

generator:
  type: "openai"
  model: "gpt-3.5-turbo"
  api_key: "${OPENAI_API_KEY}"
  kwargs:
    temperature: 0.7
    max_tokens: 2048

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
