# QDRANT + TRIVIAQA Multi-Tenancy Configuration
# Dataset: triviaqa
# Strategy: tiered

pipeline:
  name: "qdrant_triviaqa_multitenancy"
  description: "Multi-tenant RAG for triviaqa using qdrant"

database:
  type: "qdrant"
  url: "${QDRANT_URL:-http://localhost:6333}"

collection:
  name: "{dataset}_multitenancy"
  description: "{dataset} documents with multi-tenancy"

multitenancy:
  strategy: "tiered"
  field_name: "tenant_id"
  auto_create_tenant: true
  tiered_enabled: true
embedding:
  model_name: "Qwen/Qwen3-Embedding-0.6B"
  dimension: 1024
  output_dimension: null
  batch_size: 32
  device: "auto"

dataset:
  name: "trivia_qa"
  config: "rc"
  split: "train"
  max_samples: 10000
  source: "huggingface"

retrieval:
  top_k: 10
  metric: "cosine"

rag:
  prompt_template: |
    Answer based on the retrieved documents.

    Context:
    {% for doc in documents %}
    - {{ doc.content }}
    {% endfor %}

    Question: {{ query }}

    Answer:

generator:
  type: "openai"
  model: "gpt-3.5-turbo"
  api_key: "${OPENAI_API_KEY}"
  kwargs:
    temperature: 0.7
    max_tokens: 2048

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
