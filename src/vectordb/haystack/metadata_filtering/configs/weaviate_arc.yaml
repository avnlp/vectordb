# Weaviate metadata filtering configuration for ARC dataset
# Production config for science question-answering with difficulty filtering

weaviate:
  url: "${WEAVIATE_URL:-http://localhost:8080}"
  api_key: "${WEAVIATE_API_KEY:-}"

collection:
  name: "ARCMetadataFiltered"  # Weaviate class names are PascalCase
  description: "ARC Challenge dataset with metadata filtering for science QA"

dataloader:
  type: "haystack"
  dataset_name: "ai2_arc"
  config: "ARC-Challenge"
  split: "test"
  limit: 1000

embeddings:
  model: "Qwen/Qwen3-Embedding-0.6B"
  dimension: 384
  batch_size: 32

metadata_filtering:
  test_query: "What is the main function of mitochondria?"

  schema:
    - field: "question"
      type: "string"
      operators: ["eq", "contains"]
      description: "Science question text with choices"

    - field: "answerKey"
      type: "string"
      operators: ["eq", "in"]
      description: "Correct answer key (A, B, C, D)"

    - field: "id"
      type: "string"
      operators: ["eq", "in"]
      description: "Context document ID"

    - field: "title"
      type: "string"
      operators: ["eq", "contains", "in"]
      description: "Source article title"

  test_filters:
    - name: "by_answer_key"
      description: "Filter by correct answer key"
      conditions:
        - field: "answerKey"
          operator: "eq"
          value: "A"

    - name: "by_title_keyword"
      description: "Filter by topic in title"
      conditions:
        - field: "title"
          operator: "contains"
          value: "cell"

    - name: "combined_filter"
      description: "Filter by answer key and title keyword"
      conditions:
        - field: "answerKey"
          operator: "in"
          value: ["A", "B"]
        - field: "title"
          operator: "contains"
          value: "science"

logging:
  level: "INFO"
  name: "weaviate_arc_metadata_filtering"
