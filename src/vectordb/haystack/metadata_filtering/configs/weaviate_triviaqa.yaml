# Weaviate metadata filtering configuration for TriviaQA dataset
# Production config for question-answering with evidence retrieval

weaviate:
  url: "${WEAVIATE_URL:-http://localhost:8080}"
  api_key: "${WEAVIATE_API_KEY:-}"

collection:
  name: "TriviaQAMetadataFiltered"  # Weaviate class names are PascalCase
  description: "TriviaQA dataset with metadata filtering for evidence retrieval"

dataloader:
  type: "haystack"
  dataset_name: "trivia_qa"
  config: "rc"
  split: "test"
  limit: 1000

embeddings:
  model: "Qwen/Qwen3-Embedding-0.6B"
  dimension: 384
  batch_size: 32

metadata_filtering:
  test_query: "What is the capital of France?"

  schema:
    - field: "question"
      type: "string"
      operators: ["eq", "contains"]
      description: "Original question text"

    - field: "id"
      type: "string"
      operators: ["eq", "in"]
      description: "Context document ID"

    - field: "title"
      type: "string"
      operators: ["eq", "contains", "in"]
      description: "Wikipedia article title"

  test_filters:
    - name: "by_title"
      description: "Filter by specific Wikipedia article title"
      conditions:
        - field: "title"
          operator: "contains"
          value: "France"

    - name: "by_id"
      description: "Filter by document ID"
      conditions:
        - field: "id"
          operator: "eq"
          value: "1"

logging:
  level: "INFO"
  name: "weaviate_triviaqa_metadata_filtering"
