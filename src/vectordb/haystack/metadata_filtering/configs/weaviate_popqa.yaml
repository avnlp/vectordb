# Weaviate metadata filtering configuration for PopQA dataset
# Production config for popular knowledge question-answering

weaviate:
  url: "${WEAVIATE_URL:-http://localhost:8080}"
  api_key: "${WEAVIATE_API_KEY:-}"

collection:
  name: "PopQAMetadataFiltered"  # Weaviate class names are PascalCase
  description: "PopQA long-tail dataset with metadata filtering for popular knowledge QA"

dataloader:
  type: "haystack"
  dataset_name: "akariasai/PopQA"
  split: "test"
  limit: 1000

embeddings:
  model: "Qwen/Qwen3-Embedding-0.6B"
  dimension: 384
  batch_size: 32

metadata_filtering:
  test_query: "Who wrote Romeo and Juliet?"

  schema:
    - field: "question"
      type: "string"
      operators: ["eq", "contains"]
      description: "Original question text"

    - field: "id"
      type: "string"
      operators: ["eq", "in"]
      description: "Context document ID"

    - field: "title"
      type: "string"
      operators: ["eq", "contains", "in"]
      description: "Wikipedia article title"

  test_filters:
    - name: "by_title"
      description: "Filter by specific Wikipedia article title"
      conditions:
        - field: "title"
          operator: "contains"
          value: "Shakespeare"

    - name: "multiple_titles"
      description: "Filter by multiple possible titles"
      conditions:
        - field: "title"
          operator: "in"
          value: ["William Shakespeare", "Romeo and Juliet", "Hamlet"]

logging:
  level: "INFO"
  name: "weaviate_popqa_metadata_filtering"
